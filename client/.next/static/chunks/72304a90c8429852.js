(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,17548,e=>{"use strict";var t=e.i(10977),r=e.i(72721),s=e.i(95349),a=e.i(39314),i=e.i(20215),l=class extends a.Subscribable{#e;#t=void 0;#r;#s;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,i.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,i.hashKey)(t.mutationKey)!==(0,i.hashKey)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#a(),this.#i()}mutate(e,t){return this.#s=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#a(){let e=this.#r?.state??(0,r.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){s.notifyManager.batch(()=>{if(this.#s&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#s.onSuccess?.(e.data,t,r,s)}catch(e){Promise.reject(e)}try{this.#s.onSettled?.(e.data,null,t,r,s)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#s.onError?.(e.error,t,r,s)}catch(e){Promise.reject(e)}try{this.#s.onSettled?.(void 0,e.error,t,r,s)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#t)})})}},o=e.i(36109);function n(e,r){let a=(0,o.useQueryClient)(r),[n]=t.useState(()=>new l(a,e));t.useEffect(()=>{n.setOptions(e)},[n,e]);let c=t.useSyncExternalStore(t.useCallback(e=>n.subscribe(s.notifyManager.batchCalls(e)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),u=t.useCallback((e,t)=>{n.mutate(e,t).catch(i.noop)},[n]);if(c.error&&(0,i.shouldThrowError)(n.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:u,mutateAsync:c.mutate}}e.s(["useMutation",()=>n],17548)},49675,e=>{"use strict";let t;var r=e.i(15054),s=e.i(95349),a=e.i(40614),i=e.i(39314),l=e.i(28261),o=e.i(20215),n=e.i(86699),c=class extends i.Subscribable{constructor(e,t){super(),this.options=t,this.#e=e,this.#l=null,this.#o=(0,l.pendingThenable)(),this.bindMethods(),this.setOptions(t)}#e;#n=void 0;#c=void 0;#t=void 0;#u;#d;#o;#l;#h;#p;#m;#f;#x;#g;#b=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#n.addObserver(this),u(this.#n,this.options)?this.#y():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return d(this.#n,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return d(this.#n,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#j(),this.#n.removeObserver(this)}setOptions(e){let t=this.options,r=this.#n;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,o.resolveEnabled)(this.options.enabled,this.#n))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#n.setOptions(this.options),t._defaulted&&!(0,o.shallowEqualObjects)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#n,observer:this});let s=this.hasListeners();s&&h(this.#n,r,this.options,t)&&this.#y(),this.updateResult(),s&&(this.#n!==r||(0,o.resolveEnabled)(this.options.enabled,this.#n)!==(0,o.resolveEnabled)(t.enabled,this.#n)||(0,o.resolveStaleTime)(this.options.staleTime,this.#n)!==(0,o.resolveStaleTime)(t.staleTime,this.#n))&&this.#k();let a=this.#R();s&&(this.#n!==r||(0,o.resolveEnabled)(this.options.enabled,this.#n)!==(0,o.resolveEnabled)(t.enabled,this.#n)||a!==this.#g)&&this.#C(a)}getOptimisticResult(e){var t,r;let s=this.#e.getQueryCache().build(this.#e,e),a=this.createResult(s,e);return t=this,r=a,(0,o.shallowEqualObjects)(t.getCurrentResult(),r)||(this.#t=a,this.#d=this.options,this.#u=this.#n.state),a}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),t?.(r),"promise"===r&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#o.status||this.#o.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,r))})}trackProp(e){this.#b.add(e)}getCurrentQuery(){return this.#n}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#y({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#y(e){this.#N();let t=this.#n.fetch(this.options,e);return e?.throwOnError||(t=t.catch(o.noop)),t}#k(){this.#w();let e=(0,o.resolveStaleTime)(this.options.staleTime,this.#n);if(o.isServer||this.#t.isStale||!(0,o.isValidTimeout)(e))return;let t=(0,o.timeUntilStale)(this.#t.dataUpdatedAt,e);this.#f=n.timeoutManager.setTimeout(()=>{this.#t.isStale||this.updateResult()},t+1)}#R(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#n):this.options.refetchInterval)??!1}#C(e){this.#j(),this.#g=e,!o.isServer&&!1!==(0,o.resolveEnabled)(this.options.enabled,this.#n)&&(0,o.isValidTimeout)(this.#g)&&0!==this.#g&&(this.#x=n.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||r.focusManager.isFocused())&&this.#y()},this.#g))}#v(){this.#k(),this.#C(this.#R())}#w(){this.#f&&(n.timeoutManager.clearTimeout(this.#f),this.#f=void 0)}#j(){this.#x&&(n.timeoutManager.clearInterval(this.#x),this.#x=void 0)}createResult(e,t){let r,s=this.#n,i=this.options,n=this.#t,c=this.#u,d=this.#d,m=e!==s?e.state:this.#c,{state:f}=e,x={...f},g=!1;if(t._optimisticResults){let r=this.hasListeners(),l=!r&&u(e,t),o=r&&h(e,s,t,i);(l||o)&&(x={...x,...(0,a.fetchState)(f.data,e.options)}),"isRestoring"===t._optimisticResults&&(x.fetchStatus="idle")}let{error:b,errorUpdatedAt:y,status:v}=x;r=x.data;let w=!1;if(void 0!==t.placeholderData&&void 0===r&&"pending"===v){let e;n?.isPlaceholderData&&t.placeholderData===d?.placeholderData?(e=n.data,w=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#m?.state.data,this.#m):t.placeholderData,void 0!==e&&(v="success",r=(0,o.replaceData)(n?.data,e,t),g=!0)}if(t.select&&void 0!==r&&!w)if(n&&r===c?.data&&t.select===this.#h)r=this.#p;else try{this.#h=t.select,r=t.select(r),r=(0,o.replaceData)(n?.data,r,t),this.#p=r,this.#l=null}catch(e){this.#l=e}this.#l&&(b=this.#l,r=this.#p,y=Date.now(),v="error");let j="fetching"===x.fetchStatus,N="pending"===v,k="error"===v,R=N&&j,C=void 0!==r,S={status:v,fetchStatus:x.fetchStatus,isPending:N,isSuccess:"success"===v,isError:k,isInitialLoading:R,isLoading:R,data:r,dataUpdatedAt:x.dataUpdatedAt,error:b,errorUpdatedAt:y,failureCount:x.fetchFailureCount,failureReason:x.fetchFailureReason,errorUpdateCount:x.errorUpdateCount,isFetched:x.dataUpdateCount>0||x.errorUpdateCount>0,isFetchedAfterMount:x.dataUpdateCount>m.dataUpdateCount||x.errorUpdateCount>m.errorUpdateCount,isFetching:j,isRefetching:j&&!N,isLoadingError:k&&!C,isPaused:"paused"===x.fetchStatus,isPlaceholderData:g,isRefetchError:k&&C,isStale:p(e,t),refetch:this.refetch,promise:this.#o,isEnabled:!1!==(0,o.resolveEnabled)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=void 0!==S.data,r="error"===S.status&&!t,a=e=>{r?e.reject(S.error):t&&e.resolve(S.data)},i=()=>{a(this.#o=S.promise=(0,l.pendingThenable)())},o=this.#o;switch(o.status){case"pending":e.queryHash===s.queryHash&&a(o);break;case"fulfilled":(r||S.data!==o.value)&&i();break;case"rejected":r&&S.error===o.reason||i()}}return S}updateResult(){let e=this.#t,t=this.createResult(this.#n,this.options);if(this.#u=this.#n.state,this.#d=this.options,void 0!==this.#u.data&&(this.#m=this.#n),(0,o.shallowEqualObjects)(t,e))return;this.#t=t;let r=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#b.size)return!0;let s=new Set(r??this.#b);return this.options.throwOnError&&s.add("error"),Object.keys(this.#t).some(t=>this.#t[t]!==e[t]&&s.has(t))};this.#i({listeners:r()})}#N(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#n)return;let t=this.#n;this.#n=e,this.#c=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#i(e){s.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#t)}),this.#e.getQueryCache().notify({query:this.#n,type:"observerResultsUpdated"})})}};function u(e,t){return!1!==(0,o.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&d(e,t,t.refetchOnMount)}function d(e,t,r){if(!1!==(0,o.resolveEnabled)(t.enabled,e)&&"static"!==(0,o.resolveStaleTime)(t.staleTime,e)){let s="function"==typeof r?r(e):r;return"always"===s||!1!==s&&p(e,t)}return!1}function h(e,t,r,s){return(e!==t||!1===(0,o.resolveEnabled)(s.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&p(e,r)}function p(e,t){return!1!==(0,o.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,o.resolveStaleTime)(t.staleTime,e))}e.i(93677);var m=e.i(10977),f=e.i(36109);e.i(66497);var x=m.createContext((t=!1,{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t})),g=m.createContext(!1);g.Provider;var b=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function y(e,t){return function(e,t,r){let a,i=m.useContext(g),l=m.useContext(x),n=(0,f.useQueryClient)(r),c=n.defaultQueryOptions(e);n.getDefaultOptions().queries?._experimental_beforeQuery?.(c);let u=n.getQueryCache().get(c.queryHash);if(c._optimisticResults=i?"isRestoring":"optimistic",c.suspense){let e=e=>"static"===e?e:Math.max(e??1e3,1e3),t=c.staleTime;c.staleTime="function"==typeof t?(...r)=>e(t(...r)):e(t),"number"==typeof c.gcTime&&(c.gcTime=Math.max(c.gcTime,1e3))}a=u?.state.error&&"function"==typeof c.throwOnError?(0,o.shouldThrowError)(c.throwOnError,[u.state.error,u]):c.throwOnError,(c.suspense||c.experimental_prefetchInRender||a)&&!l.isReset()&&(c.retryOnMount=!1),m.useEffect(()=>{l.clearReset()},[l]);let d=!n.getQueryCache().get(c.queryHash),[h]=m.useState(()=>new t(n,c)),p=h.getOptimisticResult(c),y=!i&&!1!==e.subscribed;if(m.useSyncExternalStore(m.useCallback(e=>{let t=y?h.subscribe(s.notifyManager.batchCalls(e)):o.noop;return h.updateResult(),t},[h,y]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),m.useEffect(()=>{h.setOptions(c)},[c,h]),c?.suspense&&p.isPending)throw b(c,h,l);if((({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(a&&void 0===e.data||(0,o.shouldThrowError)(r,[e.error,s])))({result:p,errorResetBoundary:l,throwOnError:c.throwOnError,query:u,suspense:c.suspense}))throw p.error;if(n.getDefaultOptions().queries?._experimental_afterQuery?.(c,p),c.experimental_prefetchInRender&&!o.isServer&&p.isLoading&&p.isFetching&&!i){let e=d?b(c,h,l):u?.promise;e?.catch(o.noop).finally(()=>{h.updateResult()})}return c.notifyOnChangeProps?p:h.trackResult(p)}(e,c,t)}e.s(["useQuery",()=>y],49675)},87425,e=>{"use strict";let t=(0,e.i(43184).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],87425)},35822,e=>{"use strict";let t=(0,e.i(43184).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],35822)},26796,13330,97609,e=>{"use strict";var t=e.i(43184);let r=(0,t.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>r],26796);let s=(0,t.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>s],13330);let a=(0,t.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>a],97609)},10763,e=>{"use strict";let t=(0,e.i(43184).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],10763)},50605,56646,e=>{"use strict";let t=(0,e.i(43184).default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);e.s(["Globe",()=>t],50605);var r=e.i(44713);async function s(){try{console.log("ðŸ§ª Testing bucket access for both avatars and portfolio-image...");let e=new File(["test"],"avatar-test.txt",{type:"text/plain"}),{error:t}=await r.supabase.storage.from("avatars").upload(`test-${Date.now()}-avatar.txt`,e,{upsert:!0}),s=new File(["test"],"portfolio-test.txt",{type:"text/plain"}),{error:a}=await r.supabase.storage.from("portfolio-image").upload(`test-${Date.now()}-portfolio.txt`,s,{upsert:!0});if(t||a){let e=t?`Avatars bucket: ${t.message}`:`Portfolio bucket: ${a?.message||"Unknown error"}`;return{success:!1,error:e}}return console.log("âœ… Both buckets are accessible!"),{success:!0,message:"Both avatars and portfolio-image buckets are working correctly!"}}catch(e){return console.error("Bucket access test error:",e),{success:!1,error:e.message||"Connection failed"}}}async function a(e){try{let t=l(e);if(t)throw Error(t);let s=e.name.split(".").pop(),a=`avatar-${Date.now()}-${Math.random().toString(36).substring(2)}.${s}`;console.log("Attempting to upload to avatars bucket:",a),await r.supabase.storage.from("avatars").remove([a]);let i=await r.supabase.storage.from("avatars").upload(a,e,{cacheControl:"3600",upsert:!0,contentType:e.type});if(i.error)if(console.error("Supabase avatar upload error:",i.error),i.error.message.includes("row-level security")||i.error.message.includes("permission")){if(console.log("Retrying with authenticated upload..."),(i=await r.supabase.storage.from("avatars").upload(a,e,{cacheControl:"3600",upsert:!0,contentType:e.type})).error)throw Error(`Avatar upload failed: ${i.error.message}`)}else throw Error(`Avatar upload failed: ${i.error.message}`);i.data,console.log("Avatar upload successful, getting public URL");let{data:{publicUrl:o}}=r.supabase.storage.from("avatars").getPublicUrl(a);return console.log("Avatar public URL generated:",o),o}catch(e){throw console.error("Avatar upload error:",e),Error(e.message||"Failed to upload avatar")}}async function i(e){try{let t=l(e);if(t)throw Error(t);let s=e.name.split(".").pop(),a=`project-${Date.now()}-${Math.random().toString(36).substring(2)}.${s}`,i=`projects/${a}`;await r.supabase.storage.from("portfolio-image").remove([i]);let o=await r.supabase.storage.from("portfolio-image").upload(i,e,{cacheControl:"3600",upsert:!0,contentType:e.type});if(o.error)if(console.error("Supabase project image upload error:",o.error),o.error.message.includes("row-level security")||o.error.message.includes("permission")){if(console.log("Retrying with authenticated upload..."),(o=await r.supabase.storage.from("portfolio-image").upload(i,e,{cacheControl:"3600",upsert:!0,contentType:e.type})).error)throw Error(`Project image upload failed: ${o.error.message}`)}else throw Error(`Project image upload failed: ${o.error.message}`);o.data;let{data:{publicUrl:n}}=r.supabase.storage.from("portfolio-image").getPublicUrl(i);return console.log("Project image public URL generated:",n),n}catch(e){throw console.error("Project image upload error:",e),Error(e.message||"Failed to upload project image")}}function l(e){return["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(e.type)?e.size>5242880?"Image size must be less than 5MB":null:"Please upload a valid image file (JPEG, PNG, GIF, or WebP)"}e.s(["testBucketAccess",()=>s,"uploadAvatarImage",()=>a,"uploadProjectImage",()=>i,"validateImageFile",()=>l],56646)},28124,e=>{"use strict";var t=e.i(66497),r=e.i(10977),s=e.i(67147),a=e.i(26796),i=e.i(13330),l=e.i(35822),o=e.i(10763),n=e.i(97609),c=e.i(43184);let u=(0,c.default)("file-code",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]]),d=(0,c.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var h=e.i(44713),p=e.i(50738),m=e.i(87425);let f=(0,c.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var x=e.i(50605);let g=(0,c.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),b=(0,c.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),y=(0,c.default)("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]),v=(0,c.default)("list-todo",[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]]);var w=e.i(56646),j=e.i(96583),N=e.i(2440);function k({isOpen:e,onClose:a,onSave:i,project:l}){let[o,c]=(0,r.useState)({title:"",slug:"",description:"",category:"",tech_stack:"",image:"",live_url:"",status:"published",order:0}),[u,d]=(0,r.useState)(!1),[h,k]=(0,r.useState)(!1),[R,C]=(0,r.useState)(""),[S,M]=(0,r.useState)("upload"),[E,Q]=(0,r.useState)("");(0,r.useEffect)(()=>{l?(c({title:l.title||"",slug:l.slug||"",description:l.description||"",category:l.category||"",tech_stack:Array.isArray(l.tech_stack)?l.tech_stack.join(", "):"",image:l.image||"",live_url:l.live_url||"",status:l.status||"published",order:l.order||0}),Q(l.image||"")):(c({title:"",slug:"",description:"",category:"",tech_stack:"",image:"",live_url:"",status:"published",order:0}),Q("")),C("")},[l,e]),(0,r.useEffect)(()=>{!l&&o.title&&c(e=>({...e,slug:(0,j.slugify)(o.title)}))},[o.title,l]);let O=async e=>{let t=e.target.files?.[0];if(!t)return;let r=(0,w.validateImageFile)(t);if(r)return void C(r);k(!0);try{let e=await (0,w.uploadProjectImage)(t);c({...o,image:e}),Q(e)}catch(e){C(e.message||"Upload failed")}finally{k(!1)}},T=async e=>{e.preventDefault(),d(!0);try{let e={...o,tech_stack:o.tech_stack.split(",").map(e=>e.trim()).filter(e=>e)};await i(e),a()}catch(e){C(e.message||"Save failed")}finally{d(!1)}};return e?(0,t.jsx)(N.AnimatePresence,{children:(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center z-[60] p-4 sm:p-6 overflow-hidden",children:(0,t.jsxs)(s.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"bg-[#0A0B10] border border-white/[0.05] max-w-2xl w-full max-h-[90vh] overflow-hidden rounded-[2rem] flex flex-col shadow-2xl",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-white/[0.05] flex justify-between items-center bg-white/[0.01]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary",children:(0,t.jsx)(y,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold tracking-tight",children:l?"Refine Artifact":"Deploy New Artifact"}),(0,t.jsx)("p",{className:"text-[10px] text-foreground/40 font-bold uppercase tracking-widest",children:l?`ID: ${l.id.slice(0,8)}`:"Drafting Stage"})]})]}),(0,t.jsx)("button",{onClick:a,className:"p-2 hover:bg-white/5 rounded-xl transition-colors text-foreground/20 hover:text-foreground",children:(0,t.jsx)(p.X,{size:20})})]}),(0,t.jsxs)("form",{onSubmit:T,className:"flex-grow overflow-y-auto custom-scrollbar p-6 space-y-8",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,t.jsxs)("div",{onClick:()=>c({...o,status:"published"}),className:(0,j.cn)("flex-1 flex items-center gap-3 p-4 rounded-2xl border transition-all cursor-pointer","published"===o.status?"bg-emerald-500/5 border-emerald-500/20 text-emerald-400":"bg-white/[0.01] border-white/[0.05] text-foreground/20"),children:[(0,t.jsx)("div",{className:(0,j.cn)("w-2 h-2 rounded-full","published"===o.status?"bg-emerald-400 animate-pulse":"bg-foreground/20")}),(0,t.jsx)("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Published"}),"published"===o.status&&(0,t.jsx)(g,{size:14,className:"ml-auto"})]}),(0,t.jsxs)("div",{onClick:()=>c({...o,status:"draft"}),className:(0,j.cn)("flex-1 flex items-center gap-3 p-4 rounded-2xl border transition-all cursor-pointer","draft"===o.status?"bg-yellow-500/5 border-yellow-500/20 text-yellow-500":"bg-white/[0.01] border-white/[0.05] text-foreground/20"),children:[(0,t.jsx)("div",{className:(0,j.cn)("w-2 h-2 rounded-full","draft"===o.status?"bg-yellow-400":"bg-foreground/20")}),(0,t.jsx)("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Draft"}),"draft"===o.status&&(0,t.jsx)(b,{size:14,className:"ml-auto"})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-bold uppercase tracking-widest text-foreground/30 ml-1",children:"Artifact Title"}),(0,t.jsx)("input",{required:!0,value:o.title,onChange:e=>c({...o,title:e.target.value}),className:"w-full bg-white/[0.02] border border-white/[0.05] rounded-xl px-4 py-3 text-sm focus:border-primary/50 transition-all outline-none",placeholder:"Project Name"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-bold uppercase tracking-widest text-foreground/30 ml-1",children:"URL Path (Slug)"}),(0,t.jsx)("input",{required:!0,value:o.slug,onChange:e=>c({...o,slug:(0,j.slugify)(e.target.value)}),className:"w-full bg-white/[0.02] border border-white/[0.05] rounded-xl px-4 py-3 text-sm focus:border-primary/50 transition-all outline-none font-mono text-[11px]",placeholder:"project-slug"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-bold uppercase tracking-widest text-foreground/30 ml-1",children:"Brief Description"}),(0,t.jsx)("textarea",{required:!0,value:o.description,onChange:e=>c({...o,description:e.target.value}),className:"w-full bg-white/[0.02] border border-white/[0.05] rounded-xl px-4 py-3 text-sm focus:border-primary/50 transition-all outline-none min-h-[100px] resize-none",placeholder:"Executive summary of the project..."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-bold uppercase tracking-widest text-foreground/30 ml-1",children:"Technology Stack"}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(v,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-foreground/20 group-focus-within:text-primary",size:14}),(0,t.jsx)("input",{value:o.tech_stack,onChange:e=>c({...o,tech_stack:e.target.value}),className:"w-full bg-white/[0.02] border border-white/[0.05] rounded-xl pl-9 pr-4 py-3 text-sm focus:border-primary/50 transition-all outline-none",placeholder:"React, Next.js, Tail..."})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-bold uppercase tracking-widest text-foreground/30 ml-1",children:"Live URL"}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(x.Globe,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-foreground/20 group-focus-within:text-primary",size:14}),(0,t.jsx)("input",{type:"url",value:o.live_url,onChange:e=>c({...o,live_url:e.target.value}),className:"w-full bg-white/[0.02] border border-white/[0.05] rounded-xl pl-9 pr-4 py-3 text-sm focus:border-primary/50 transition-all outline-none",placeholder:"https://..."})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("label",{className:"text-[10px] font-bold uppercase tracking-widest text-foreground/30 ml-1",children:"Visual Identity"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>M("upload"),className:(0,j.cn)("px-2 py-1 rounded-md text-[9px] font-bold uppercase transition-all","upload"===S?"bg-white text-black":"text-foreground/40 hover:text-foreground"),children:"Upload"}),(0,t.jsx)("button",{type:"button",onClick:()=>M("url"),className:(0,j.cn)("px-2 py-1 rounded-md text-[9px] font-bold uppercase transition-all","url"===S?"bg-white text-black":"text-foreground/40 hover:text-foreground"),children:"URL"})]})]}),"upload"===S?(0,t.jsxs)("label",{className:"block w-full border-2 border-dashed border-white/[0.05] rounded-2xl p-8 hover:border-primary/30 transition-all cursor-pointer bg-white/[0.01]",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:O,className:"hidden"}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[h?(0,t.jsx)(m.Loader2,{className:"animate-spin text-primary",size:24}):(0,t.jsx)(f,{className:"text-foreground/20",size:24}),(0,t.jsx)("p",{className:"text-[11px] font-bold text-foreground/40",children:"Drop artifact visual or click to browse"})]})]}):(0,t.jsx)("input",{type:"url",value:o.image,onChange:e=>{c({...o,image:e.target.value}),Q(e.target.value)},className:"w-full bg-white/[0.02] border border-white/[0.05] rounded-xl px-4 py-3 text-sm focus:border-primary/50 transition-all outline-none",placeholder:"https://images.unsplash.com/..."}),E&&(0,t.jsxs)("div",{className:"relative aspect-video rounded-xl overflow-hidden border border-white/[0.05]",children:[(0,t.jsx)("img",{src:E,alt:"Preview",className:"w-full h-full object-cover"}),(0,t.jsx)("button",{type:"button",onClick:()=>{c({...o,image:""}),Q("")},className:"absolute top-2 right-2 p-1.5 bg-black/60 backdrop-blur-md rounded-lg text-white/60 hover:text-red-400 transition-colors",children:(0,t.jsx)(p.X,{size:14})})]})]})]}),R&&(0,t.jsx)("p",{className:"text-red-400 text-[11px] font-bold bg-red-400/5 p-3 rounded-lg border border-red-400/20",children:R})]}),(0,t.jsxs)("div",{className:"p-6 border-t border-white/[0.05] bg-white/[0.01] flex gap-3",children:[(0,t.jsx)("button",{onClick:a,className:"flex-1 py-3 rounded-xl bg-white/5 font-bold text-xs hover:bg-white/10 transition-all",children:"Cancel"}),(0,t.jsxs)("button",{onClick:T,disabled:u||h,className:"flex-1 py-3 rounded-xl bg-white text-black font-bold text-xs hover:bg-white/90 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:[u?(0,t.jsx)(m.Loader2,{size:16,className:"animate-spin"}):(0,t.jsx)(n.CheckCircle2,{size:16}),l?"Refine Changes":"Deploy Artifact"]})]})]})})}):null}var R=e.i(49675),C=e.i(17548),S=e.i(36109),M=e.i(34034);function E(){let e=(0,S.useQueryClient)(),[c,p]=(0,r.useState)(!1),[m,f]=(0,r.useState)(null),[x,g]=(0,r.useState)(""),[b,y]=(0,r.useState)("all"),[v,w]=(0,r.useState)(null),{data:j=[],isLoading:N}=(0,R.useQuery)({queryKey:["projects"],queryFn:async()=>{let{data:e,error:t}=await h.supabase.from("projects").select("*").order("order",{ascending:!0});if(t)throw t;return e||[]}}),E=(0,C.useMutation)({mutationFn:async e=>{let{error:t}=await h.supabase.from("projects").delete().eq("id",e);if(t)throw t},onSuccess:()=>{e.invalidateQueries({queryKey:["projects"]}),M.toast.success("Project deleted successfully"),w(null)},onError:e=>{M.toast.error(e.message||"Failed to delete project")}}),Q=j.filter(e=>{let t=e.title.toLowerCase().includes(x.toLowerCase())||e.category.toLowerCase().includes(x.toLowerCase()),r="all"===b||e.category.toLowerCase()===b.toLowerCase();return t&&r}),O=["all",...new Set(j.map(e=>e.category.toLowerCase()))];return(0,t.jsxs)("div",{className:"space-y-8 pb-20 max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Project Arsenal"}),(0,t.jsx)("p",{className:"text-foreground/40 mt-1 font-medium text-sm",children:"Manage and curate your professional portfolio artifacts."})]}),(0,t.jsxs)("button",{onClick:()=>{f(null),p(!0)},className:"flex items-center gap-2 bg-white text-black px-5 py-2.5 rounded-xl font-bold text-sm hover:bg-white/90 transition-all shadow-lg shadow-white/5 group",children:[(0,t.jsx)(a.Plus,{size:18,className:"group-hover:rotate-90 transition-transform duration-300"}),"Deploy Project"]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,t.jsxs)("div",{className:"relative flex-grow group",children:[(0,t.jsx)(o.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-foreground/20 group-focus-within:text-primary transition-colors",size:16}),(0,t.jsx)("input",{type:"text",placeholder:"Search projects...",value:x,onChange:e=>g(e.target.value),className:"w-full bg-white/[0.02] border border-white/[0.05] rounded-xl pl-11 pr-4 py-3 text-sm focus:outline-none focus:border-primary/50 transition-all font-medium placeholder:text-foreground/20"})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("select",{value:b,onChange:e=>y(e.target.value),className:"appearance-none bg-white/[0.02] border border-white/[0.05] rounded-xl px-4 py-3 pr-10 text-sm font-medium focus:outline-none focus:border-primary/50 transition-all cursor-pointer capitalize",children:O.map(e=>(0,t.jsx)("option",{value:e,className:"bg-[#0A0B10]",children:e},e))}),(0,t.jsx)(d,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-foreground/20 pointer-events-none",size:14})]})})]}),(0,t.jsx)("div",{className:"bg-white/[0.01] border border-white/[0.05] rounded-2xl overflow-hidden shadow-2xl",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-white/[0.05] bg-white/[0.01]",children:[(0,t.jsx)("th",{className:"px-6 py-4 text-[10px] font-bold uppercase tracking-[0.2em] text-foreground/20",children:"Artifact"}),(0,t.jsx)("th",{className:"px-6 py-4 text-[10px] font-bold uppercase tracking-[0.2em] text-foreground/20",children:"Configuration"}),(0,t.jsx)("th",{className:"px-6 py-4 text-[10px] font-bold uppercase tracking-[0.2em] text-foreground/20",children:"Visibility"}),(0,t.jsx)("th",{className:"px-6 py-4 text-[10px] font-bold uppercase tracking-[0.2em] text-foreground/20 text-right",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-white/[0.03]",children:N?[,,,,].fill(0).map((e,r)=>(0,t.jsx)("tr",{className:"animate-pulse",children:(0,t.jsx)("td",{colSpan:4,className:"px-6 py-8",children:(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-white/5 rounded-xl"}),(0,t.jsxs)("div",{className:"flex-grow space-y-2",children:[(0,t.jsx)("div",{className:"h-4 bg-white/5 rounded w-1/4"}),(0,t.jsx)("div",{className:"h-3 bg-white/5 rounded w-1/2"})]})]})})},r)):Q.length>0?Q.map((e,r)=>(0,t.jsxs)(s.motion.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.05*r},className:"group hover:bg-white/[0.01] transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-5",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl overflow-hidden border border-white/[0.05] bg-white/5 group-hover:border-primary/30 transition-colors",children:(0,t.jsx)("img",{src:e.image,alt:"",className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-sm tracking-tight text-foreground",children:e.title}),(0,t.jsx)("p",{className:"text-[11px] text-foreground/30 line-clamp-1 max-w-[180px] mt-0.5",children:e.description})]})]})}),(0,t.jsx)("td",{className:"px-6 py-5",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("span",{className:"inline-flex w-fit px-2 py-0.5 bg-primary/5 border border-primary/10 text-[9px] font-bold uppercase tracking-wider text-primary rounded-md",children:e.category}),(0,t.jsx)("div",{className:"flex gap-1.5 overflow-hidden",children:e.tech_stack?.slice(0,3).map(e=>(0,t.jsx)("span",{className:"text-[10px] text-foreground/20 whitespace-nowrap",children:e},e))})]})}),(0,t.jsx)("td",{className:"px-6 py-5",children:(0,t.jsx)("div",{className:"flex items-center gap-2",children:"draft"===e.status?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 bg-yellow-500 rounded-full"}),(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider text-yellow-500/80",children:"Draft"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full shadow-[0_0_8px_rgba(16,185,129,0.3)]"}),(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider text-emerald-500/80",children:"Published"})]})})}),(0,t.jsx)("td",{className:"px-6 py-5",children:(0,t.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>{f(e),p(!0)},className:"p-2 rounded-lg hover:bg-white/5 text-foreground/40 hover:text-foreground transition-all",children:(0,t.jsx)(i.Edit2,{size:16})}),v===e.id?(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:()=>E.mutate(e.id),className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white transition-all",children:(0,t.jsx)(n.CheckCircle2,{size:16})}),(0,t.jsx)("button",{onClick:()=>w(null),className:"p-2 rounded-lg hover:bg-white/5 text-foreground/40",children:(0,t.jsx)(a.Plus,{size:16,className:"rotate-45"})})]}):(0,t.jsx)("button",{onClick:()=>w(e.id),className:"p-2 rounded-lg hover:bg-red-500/10 text-foreground/40 hover:text-red-400 transition-all",children:(0,t.jsx)(l.Trash2,{size:16})})]})})]},e.id)):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"px-6 py-20 text-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center text-foreground/10",children:(0,t.jsx)(u,{size:24})}),(0,t.jsx)("p",{className:"text-sm text-foreground/20 italic font-medium",children:"No projects found in this matrix."})]})})})})]})})}),(0,t.jsx)(k,{isOpen:c,onClose:()=>p(!1),onSave:async t=>{let r=m?h.supabase.from("projects").update(t).eq("id",m.id):h.supabase.from("projects").insert([t]),{error:s}=await r;if(s)throw s;e.invalidateQueries({queryKey:["projects"]}),M.toast.success(m?"Project refined":"Project deployed")},project:m})]})}e.s(["default",()=>E],28124)}]);