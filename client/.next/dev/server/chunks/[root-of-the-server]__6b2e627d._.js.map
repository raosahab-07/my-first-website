{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Documents/My%20Data%20Sources/FeedbackHub/Desktop/portifolio-2/client/src/proxy.ts"],"sourcesContent":["import { createServerClient, type CookieOptions } from '@supabase/ssr'\r\nimport { NextResponse, type NextRequest } from 'next/server'\r\n\r\nexport default async function proxy(request: NextRequest) {\r\n  let response = NextResponse.next({\r\n    request: {\r\n      headers: request.headers,\r\n    },\r\n  })\r\n\r\n  const supabase = createServerClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n    {\r\n      cookies: {\r\n        get(name: string) {\r\n          return request.cookies.get(name)?.value\r\n        },\r\n        set(name: string, value: string, options: CookieOptions) {\r\n          request.cookies.set({\r\n            name,\r\n            value,\r\n            ...options,\r\n          })\r\n          response = NextResponse.next({\r\n            request: {\r\n              headers: request.headers,\r\n            },\r\n          })\r\n          response.cookies.set({\r\n            name,\r\n            value,\r\n            ...options,\r\n          })\r\n        },\r\n        remove(name: string, options: CookieOptions) {\r\n          request.cookies.set({\r\n            name,\r\n            value: '',\r\n            ...options,\r\n          })\r\n          response = NextResponse.next({\r\n            request: {\r\n              headers: request.headers,\r\n            },\r\n          })\r\n          response.cookies.set({\r\n            name,\r\n            value: '',\r\n            ...options,\r\n          })\r\n        },\r\n      },\r\n    }\r\n  )\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n\r\n  const pathname = request.nextUrl.pathname\r\n\r\n  if (pathname.startsWith('/admin')) {\r\n    if (pathname === '/admin') {\r\n      if (user) {\r\n        return NextResponse.redirect(new URL('/admin/dashboard', request.url))\r\n      }\r\n      return response\r\n    }\r\n\r\n    if (!user) {\r\n      return NextResponse.redirect(new URL('/admin', request.url))\r\n    }\r\n  }\r\n\r\n  return response\r\n}\r\n\r\nexport const config = {\r\n  matcher: ['/admin/:path*'],\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;;;AAEe,eAAe,MAAM,OAAoB;IACtD,IAAI,WAAW,wJAAY,CAAC,IAAI,CAAC;QAC/B,SAAS;YACP,SAAS,QAAQ,OAAO;QAC1B;IACF;IAEA,MAAM,WAAW,IAAA,yMAAkB,sUAGjC;QACE,SAAS;YACP,KAAI,IAAY;gBACd,OAAO,QAAQ,OAAO,CAAC,GAAG,CAAC,OAAO;YACpC;YACA,KAAI,IAAY,EAAE,KAAa,EAAE,OAAsB;gBACrD,QAAQ,OAAO,CAAC,GAAG,CAAC;oBAClB;oBACA;oBACA,GAAG,OAAO;gBACZ;gBACA,WAAW,wJAAY,CAAC,IAAI,CAAC;oBAC3B,SAAS;wBACP,SAAS,QAAQ,OAAO;oBAC1B;gBACF;gBACA,SAAS,OAAO,CAAC,GAAG,CAAC;oBACnB;oBACA;oBACA,GAAG,OAAO;gBACZ;YACF;YACA,QAAO,IAAY,EAAE,OAAsB;gBACzC,QAAQ,OAAO,CAAC,GAAG,CAAC;oBAClB;oBACA,OAAO;oBACP,GAAG,OAAO;gBACZ;gBACA,WAAW,wJAAY,CAAC,IAAI,CAAC;oBAC3B,SAAS;wBACP,SAAS,QAAQ,OAAO;oBAC1B;gBACF;gBACA,SAAS,OAAO,CAAC,GAAG,CAAC;oBACnB;oBACA,OAAO;oBACP,GAAG,OAAO;gBACZ;YACF;QACF;IACF;IAGF,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,MAAM,WAAW,QAAQ,OAAO,CAAC,QAAQ;IAEzC,IAAI,SAAS,UAAU,CAAC,WAAW;QACjC,IAAI,aAAa,UAAU;YACzB,IAAI,MAAM;gBACR,OAAO,wJAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,oBAAoB,QAAQ,GAAG;YACtE;YACA,OAAO;QACT;QAEA,IAAI,CAAC,MAAM;YACT,OAAO,wJAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,QAAQ,GAAG;QAC5D;IACF;IAEA,OAAO;AACT;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAgB;AAC5B"}}]
}